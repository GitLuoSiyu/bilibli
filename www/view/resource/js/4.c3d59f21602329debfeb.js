webpackJsonp([4],{CnOp:function(e,a){},ZsIf:function(e,a,t){"use strict";t.d(a,"a",function(){return n}),t.d(a,"b",function(){return i});var n=function(e){return/(^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$)|(^[1-9]\d{5}\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{2}[0-9Xx]$)/.test(e)},i=function(e){return/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/.test(e)}},cGnO:function(e,a,t){"use strict";t.d(a,"a",function(){return i}),t.d(a,"d",function(){return s}),t.d(a,"e",function(){return r}),t.d(a,"c",function(){return o}),t.d(a,"b",function(){return u});var n=t("GVVA"),i=function(e){return Object(n.a)("/phonerest/reward/courierCardStatus",e)},s=function(e){return Object(n.a)("/phonerest/reward/msgVerification",e)},r=function(e){return Object(n.a)("/phonerest/reward/fileUpload",e,{"Content-Type":"multipart/form-data"})},o=function(e){return Object(n.a)("/phonerest/reward/commitAddCourier",e)},u=function(e){return Object(n.a)("/phonerest/courier/queryCourierEvaluateReward",e)}},qY48:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=t("Xxa5"),i=t.n(n),s=t("exGp"),r=t.n(s),o=t("Dd8w"),u=t.n(o),c={BC:"中国银行",ICBC:"中国工商银行",CCB:"中国建设银行",SPDB:"上海浦东发展银行",ABC:"中国农业银行",BCM:"交通银行",PINGAN:"平安银行",CMSB:"民生银行",CITIC:"中信银行",PSBC:"中国邮政储蓄银行",CIB:"兴业银行",CEB:"光大银行",OTHER:"其他银行"},l=t("cGnO"),d=t("i67U"),p=t("ZsIf"),m=t("zTw+"),f=t("NYxO"),v=(u()({},Object(f.c)(["SET_LOADING"]),{uploadToServer:function(e,a){var t=this;return r()(i.a.mark(function n(){var s,r,o,u,c,d;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.SET_LOADING(!0),s=e.target.files[0],e.target.value=null,r=s.name,n.next=6,Object(m.c)(s);case 6:if(o=n.sent,s=null,!(o.length>2097152)){n.next=12;break}return n.next=11,Object(m.b)(o);case 11:o=n.sent;case 12:return u=Object(m.a)(o,r),(c=new FormData).append("uploadFile",u,r),c.append("chunk",0),n.next=18,Object(l.e)(c);case 18:(d=n.sent)&&"success"===d.status?(t[a+"Image"]=o,t.bankInfo[a]=d.result):alert(d&&d.message?d.message:"上传失败");case 20:case"end":return n.stop()}},n,t)}))()},register:function(){var e=this;return r()(i.a.mark(function a(){var t;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(l.c)(e.bankInfo);case 2:(t=a.sent)&&"success"===t.status?t.result===d.AUDIT_FAILED.CODE?alert(t&&t.message?t.message+" 请确认信息后重试":"注册失败，请确认信息后重试"):t.result===d.AUDITING.CODE?e.$router.replace({path:"/courier/status",query:{status:t.result,message:t.message?encodeURIComponent(t.message):"",id:e.$route.query.id,name:e.$route.query.name}}):t.result===d.AUDIT_SUCCESS.CODE&&(alert("开户成功"),e.$router.replace({path:"/courier/serviceEvaluation/"+e.$route.query.id})):alert("注册服务调用失败");case 4:case"end":return a.stop()}},a,e)}))()},sendSmsCode:function(){var e=this;return r()(i.a.mark(function a(){var t;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(l.d)({courierPhone:e.bankInfo.courierPhone});case 2:(t=a.sent)&&"success"===t.status?(e.waitTime=60,e.waitTimer=setInterval(function(){e.sendTimer()},1e3)):alert(t&&t.message?t.message:"发送失败");case 4:case"end":return a.stop()}},a,e)}))()},sendTimer:function(){this.waitTime>0?this.waitTime=this.waitTime-1:(clearInterval(this.waitTimer),this.waitTimer=null)}}),{name:"CourierPayInfo",data:function(){return{bankList:[],waitTime:0,waitTimer:null,bankInfo:{courierNo:null,courierName:null,accountName:null,bankCardNo:null,bankName:"",courierPhone:null,authCode:null,idCardNo:null,idCardPositive:null,idCardNegative:null},idCardPositiveImage:null,idCardNegativeImage:null}},methods:u()({},Object(f.c)(["SET_LOADING"]),{uploadToServer:function(e,a){var t=this;return r()(i.a.mark(function n(){var s,r,o,u,c,d;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.SET_LOADING(!0),s=e.target.files[0],e.target.value=null,r=s.name,n.next=6,Object(m.c)(s);case 6:if(o=n.sent,s=null,!(o.length>2097152)){n.next=12;break}return n.next=11,Object(m.b)(o);case 11:o=n.sent;case 12:return u=Object(m.a)(o,r),(c=new FormData).append("uploadFile",u,r),c.append("chunk",0),n.next=18,Object(l.e)(c);case 18:(d=n.sent)&&"success"===d.status?(t[a+"Image"]=o,t.bankInfo[a]=d.result):alert(d&&d.message?d.message:"上传失败");case 20:case"end":return n.stop()}},n,t)}))()},register:function(){var e=this;return r()(i.a.mark(function a(){var t;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(l.c)(e.bankInfo);case 2:(t=a.sent)&&"success"===t.status?t.result===d.AUDIT_FAILED.CODE?alert(t&&t.message?t.message+" 请确认信息后重试":"注册失败，请确认信息后重试"):t.result===d.AUDITING.CODE?e.$router.replace({path:"/courier/status",query:{status:t.result,message:t.message?encodeURIComponent(t.message):"",id:e.$route.query.id,name:e.$route.query.name}}):t.result===d.AUDIT_SUCCESS.CODE&&(alert("开户成功"),e.$router.replace({path:"/courier/serviceEvaluation/"+e.$route.query.id})):alert("注册服务调用失败");case 4:case"end":return a.stop()}},a,e)}))()},sendSmsCode:function(){var e=this;return r()(i.a.mark(function a(){var t;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(l.d)({courierPhone:e.bankInfo.courierPhone});case 2:(t=a.sent)&&"success"===t.status?(e.waitTime=60,e.waitTimer=setInterval(function(){e.sendTimer()},1e3)):alert(t&&t.message?t.message:"发送失败");case 4:case"end":return a.stop()}},a,e)}))()},sendTimer:function(){this.waitTime>0?this.waitTime=this.waitTime-1:(clearInterval(this.waitTimer),this.waitTimer=null)}}),computed:{checkSend:function(){return!!this.bankInfo.courierNo&&(!!this.bankInfo.courierName&&(!!this.bankInfo.bankName&&(!(!this.bankInfo.bankCardNo||!this.bankInfo.bankCardNo.length>=16)&&(!(!this.bankInfo.idCardNo||!p.a(this.bankInfo.idCardNo))&&(!(!this.bankInfo.courierPhone||!p.b(this.bankInfo.courierPhone))&&0===this.waitTime)))))},checkSubmit:function(){return!!this.bankInfo.courierNo&&(!!this.bankInfo.courierName&&(!!this.bankInfo.bankName&&(!(!this.bankInfo.bankCardNo||!this.bankInfo.bankCardNo.length>=16)&&(!(!this.bankInfo.idCardNo||!p.a(this.bankInfo.idCardNo))&&(!(!this.bankInfo.courierPhone||!p.b(this.bankInfo.courierPhone))&&(!(!this.bankInfo.authCode||6!==this.bankInfo.authCode.length)&&(!!this.bankInfo.idCardPositive&&!!this.bankInfo.idCardNegative)))))))}},mounted:function(){if(this.bankList=c,this.$route.query.id&&(this.bankInfo.courierNo=this.$route.query.id),this.$route.query.name){var e=decodeURIComponent(this.$route.query.name);this.bankInfo.courierName=e,this.bankInfo.accountName=e}}}),b={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"pay-info"},[t("div",{staticClass:"pay-info-title"},[e._v("打赏账号信息")]),e._v(" "),t("div",{staticClass:"pay-info-layout"},[t("div",{staticClass:"pay-info-item"},[t("span",{staticClass:"pay-item-tag"},[e._v("姓名")]),e._v(" "),t("span",[e._v(e._s(e.bankInfo.courierName))])]),e._v(" "),t("div",{staticClass:"pay-info-item"},[t("span",{staticClass:"pay-item-tag"},[e._v("工号")]),e._v(" "),t("span",[e._v(e._s(e.bankInfo.courierNo))])]),e._v(" "),t("div",{staticClass:"pay-info-item"},[t("span",{staticClass:"pay-item-tag"},[e._v("选择银行")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.bankInfo.bankName,expression:"bankInfo.bankName"}],staticClass:"pay-item-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.bankInfo,"bankName",a.target.multiple?t:t[0])}}},[t("option",{attrs:{value:""}},[e._v("请选择银行")]),e._v(" "),e._l(e.bankList,function(a,n){return t("option",{key:n,domProps:{value:n}},[e._v(e._s(a))])})],2),e._v(" "),t("i",{staticClass:"icon-arrow-down select-arrow-down"})]),e._v(" "),t("div",{staticClass:"pay-info-item"},[t("span",{staticClass:"pay-item-tag"},[e._v("银行卡号")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.bankInfo.bankCardNo,expression:"bankInfo.bankCardNo"}],staticClass:"pay-item-input",attrs:{placeholder:"请填写收款银行卡号"},domProps:{value:e.bankInfo.bankCardNo},on:{input:function(a){a.target.composing||e.$set(e.bankInfo,"bankCardNo",a.target.value)}}})]),e._v(" "),t("div",{staticClass:"pay-info-item"},[t("span",{staticClass:"pay-item-tag"},[e._v("身份证号")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.bankInfo.idCardNo,expression:"bankInfo.idCardNo"}],staticClass:"pay-item-input",attrs:{placeholder:"请填写开户身份证"},domProps:{value:e.bankInfo.idCardNo},on:{input:function(a){a.target.composing||e.$set(e.bankInfo,"idCardNo",a.target.value)}}})]),e._v(" "),t("div",{staticClass:"pay-info-item"},[t("span",{staticClass:"pay-item-tag"},[e._v("手机号码")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.bankInfo.courierPhone,expression:"bankInfo.courierPhone"}],staticClass:"pay-item-input",attrs:{maxlength:"11",placeholder:"请填写银行预留手机号"},domProps:{value:e.bankInfo.courierPhone},on:{input:function(a){a.target.composing||e.$set(e.bankInfo,"courierPhone",a.target.value)}}})]),e._v(" "),t("div",{staticClass:"pay-info-item"},[t("span",{staticClass:"pay-item-tag"},[e._v("短信验证")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.bankInfo.authCode,expression:"bankInfo.authCode"}],staticClass:"pay-item-input",attrs:{maxlength:"6",placeholder:"请输入短信验证码"},domProps:{value:e.bankInfo.authCode},on:{input:function(a){a.target.composing||e.$set(e.bankInfo,"authCode",a.target.value)}}}),e._v(" "),t("button",{staticClass:"pay-send-btn",class:{"button-disable":!e.checkSend},attrs:{disabled:!e.checkSend},on:{click:e.sendSmsCode}},[e._v(e._s(e.waitTime>0?e.waitTime+"秒":"发送"))])])]),e._v(" "),t("div",{staticClass:"pay-uoload-title"},[e._v("请上传您的身份证照片")]),e._v(" "),t("div",{staticClass:"pay-upload-layout"},[t("div",{staticClass:"pay-upload-canvas"},[t("div",{staticClass:"pay-upload-menu"},[t("input",{staticClass:"image-fileupload needsclick",attrs:{type:"file",id:"idCardPositive",accept:"image/png,image/jpg,image/jpeg,image/bmp"},on:{change:function(a){e.uploadToServer(a,"idCardPositive")}}}),e._v(" "),e.idCardPositiveImage?t("div",{staticClass:"pay-image-layout"},[t("img",{staticClass:"pay-upload-image",attrs:{src:e.idCardPositiveImage}})]):t("div",{staticClass:"pay-upload-bg"},[t("div",{staticClass:"pay-upload-front"}),e._v(" "),t("span",{staticClass:"pay-upload-desc"},[e._v("添加正面照片")])])]),e._v(" "),t("div",{staticClass:"pay-upload-menu"},[t("input",{staticClass:"image-fileupload needsclick",attrs:{type:"file",id:"idCardNegative",accept:"image/png,image/jpg,image/jpeg,image/bmp"},on:{change:function(a){e.uploadToServer(a,"idCardNegative")}}}),e._v(" "),e.idCardNegativeImage?t("div",{staticClass:"pay-image-layout"},[t("img",{staticClass:"pay-upload-image",attrs:{src:e.idCardNegativeImage}})]):t("div",{staticClass:"pay-upload-bg"},[t("div",{staticClass:"pay-upload-back"}),e._v(" "),t("span",{staticClass:"pay-upload-desc"},[e._v("添加反面照片")])])])]),e._v(" "),t("div",{staticClass:"pay-upload-msg"},[e._v("注：请上传的高清的身份证件照片")])]),e._v(" "),t("div",{staticClass:"pay-info-menus"},[t("button",{staticClass:"pay-info-submenu",class:{"button-disable":!e.checkSubmit},attrs:{disabled:!e.checkSubmit},on:{click:e.register}},[e._v("提交信息")])])])},staticRenderFns:[]};var C=t("VU/8")(v,b,!1,function(e){t("CnOp")},"data-v-709cb98e",null);a.default=C.exports},"zTw+":function(e,a,t){"use strict";t.d(a,"c",function(){return s}),t.d(a,"b",function(){return r}),t.d(a,"a",function(){return o});var n=t("//Fk"),i=t.n(n),s=function(e){return new i.a(function(a){var t=new FileReader;t.onload=function(e){return a(e.target.result)},t.readAsDataURL(e)})},r=function(e){return new i.a(function(a){var t=parseInt(e.length/1024/1024),n=new Image,i=document.createElement("canvas");n.src=e,n.onload=function(){var e=this.naturalWidth,s=this.naturalHeight,r=i.getContext("2d");i.height=s/t,i.width=e/t,r.drawImage(n,0,0,e/t,s/t),a(i.toDataURL("image/jpeg",.7))}})},o=function(e,a){for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1]||"image/png",i=window.atob(t[1]),s=new ArrayBuffer(i.length),r=new Uint8Array(s),o=0;o<i.length;o++)r[o]=i.charCodeAt(o);return new Blob([s],{type:n,name:a})}}});